<html lang="en">

<head>

  
  <meta charset="utf-8">
  <title>Kubernetes on Google Container Engine</title>
  <meta name="description" content="Kubernetes on Google Container Engine">
  <meta name="author" content="Rush Tehrani">

  
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link href="//fonts.googleapis.com/css?family=Raleway:400,300,600" rel="stylesheet" type="text/css">
  <link href="//fonts.googleapis.com/css?family=Open+Sans:300,400" rel="stylesheet" type="text/css">
  <link rel="stylesheet" href="http://www.rushtehrani.com.s3-website-us-west-2.amazonaws.com/css/fonts.css">

  
  <link rel="stylesheet" href="http://yui.yahooapis.com/pure/0.6.0/pure-min.css">
  
  
  <link rel="stylesheet" href="http://yui.yahooapis.com/pure/0.6.0/grids-responsive-min.css">
  
  <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/font-awesome/4.6.3/css/font-awesome.min.css">
  
  <link rel="stylesheet" href="http://www.rushtehrani.com.s3-website-us-west-2.amazonaws.com/css/custom.css">

  
  
  <link rel="stylesheet" href="http://www.rushtehrani.com.s3-website-us-west-2.amazonaws.com/highlight/styles/github.css"> 
  <script src="http://www.rushtehrani.com.s3-website-us-west-2.amazonaws.com/highlight/highlight.pack.js"></script>
  <script>
    hljs.initHighlightingOnLoad();
  </script>

</head>

<body>

<div class="header pure-g">
  <div class="pure-u-1-24 pure-u-md-5-24"></div>
  <div class="pure-u-11-12 pure-u-md-5-8">
    <div class="desktop pure-menu pure-menu-horizontal nav-menu">
      
      <a href="http://www.rushtehrani.com.s3-website-us-west-2.amazonaws.com/" class="site-title pure-menu-heading">Rush Tehrani</a>
      <ul class="pure-menu-list">
        
        
        <li class="pure-menu-item">
          <a href="https://github.com/rushtehrani" class="pure-menu-link">
            <i class="fa fa-github" aria-hidden="true"></i>
          </a>
        </li>
        
        
        <li class="pure-menu-item">
          <a href="https://twitter.com/rushtehrani" class="pure-menu-link">
            <i class="fa fa-twitter" aria-hidden="true"></i>
          </a>
        </li>
        
        
        <li class="pure-menu-item">
          <a href="https://www.linkedin.com/in/rushtehrani" class="pure-menu-link">
            <i class="fa fa-linkedin" aria-hidden="true"></i>
          </a>
        </li>
        
        
        <li class="pure-menu-item">
          <a href="https://plus.google.com/+RushTehrani" class="pure-menu-link">
            <i class="fa fa-google-plus" aria-hidden="true"></i>
          </a>
        </li>
        
        
        <li class="pure-menu-item">
          <a href="https://www.facebook.com/rustehrani" class="pure-menu-link">
            <i class="fa fa-facebook" aria-hidden="true"></i>
          </a>
        </li>
        
        
        <li class="pure-menu-item">
          <a href="mailto:hello@rushtehrani.com" class="pure-menu-link">
            <i class="fa fa-envelope" aria-hidden="true"></i>
          </a>
        </li>
        
      </ul>
    </div>
    <div class="mobile pure-menu nav-menu">
      <a href="/" class="pure-menu-heading" id="toggle-home">Rush Tehrani</a>
      <a href="#" id="toggle-btn">&#9776;</a>
      <ul class="pure-menu-list" id="toggle-content" style="display:none;">
        
        
      </ul>
    </div>
  </div>
  <div class="pure-u-1-24 pure-u-md-1-6"></div>
</div>


<div class="pure-g">
    <div class="pure-u-1-24 pure-u-md-5-24"></div>
	<div class="pure-u-11-12 pure-u-md-5-8">
        <div class="post">

            <div class="post-title">
                <h1>Kubernetes on Google Container Engine</h1>
            </div>
            <section id="share-menu" class="pure-menu pure-menu-horizontal">
      <ul class="pure-menu-list">
          
<li class="pure-menu-item">
  Share: 
</li>


<li class="pure-menu-item">
  <a href="//twitter.com/share?url=http%3a%2f%2fwww.rushtehrani.com.s3-website-us-west-2.amazonaws.com%2fpost%2fkubernetes-on-google-container-engine%2f&text=Kubernetes%20on%20Google%20Container%20Engine&via=" target="_blank" class="share-btn twitter">
    <i class="fa fa-twitter"></i>
  </a>
</li>


<li class="pure-menu-item">
  <a href="//www.linkedin.com/shareArticle?url=http%3a%2f%2fwww.rushtehrani.com.s3-website-us-west-2.amazonaws.com%2fpost%2fkubernetes-on-google-container-engine%2f&title=Kubernetes%20on%20Google%20Container%20Engine" target="_blank" class="share-btn linkedin">
    <i class="fa fa-linkedin"></i>
  </a>
</li>


<li class="pure-menu-item">
  <a href="//plus.google.com/share?url=http%3a%2f%2fwww.rushtehrani.com.s3-website-us-west-2.amazonaws.com%2fpost%2fkubernetes-on-google-container-engine%2f" target="_blank" class="share-btn google-plus">
    <i class="fa fa-google-plus"></i>
  </a>
</li>


<li class="pure-menu-item">
  <a href="//www.facebook.com/sharer/sharer.php?u=http%3a%2f%2fwww.rushtehrani.com.s3-website-us-west-2.amazonaws.com%2fpost%2fkubernetes-on-google-container-engine%2f" target="_blank" class="share-btn facebook">
    <i class="fa fa-facebook"></i>
  </a>
</li>


<li class="pure-menu-item">
  <a href="//reddit.com/submit?url=http%3a%2f%2fwww.rushtehrani.com.s3-website-us-west-2.amazonaws.com%2fpost%2fkubernetes-on-google-container-engine%2f&title=Kubernetes%20on%20Google%20Container%20Engine" target="_blank" class="share-btn reddit">
    <i class="fa fa-reddit-alien"></i>
  </a>
</li>





<li class="pure-menu-item">
  <a href="mailto:?subject=Check out this post by &body=http%3a%2f%2fwww.rushtehrani.com.s3-website-us-west-2.amazonaws.com%2fpost%2fkubernetes-on-google-container-engine%2f" target="_blank" class="share-btn email">
    <i class="fa fa-envelope"></i>
  </a>
</li>

      </ul>
</section>

            <div class="post-content">
                <p>This is a quick walkthrough to show you how to spin up a very small Kubernetes (K8S) cluster on Google Cloud Platform (GCE) and then get access to the K8S REST API.</p>

<p>Before you get started, you need to sign-in to <a href="https://console.cloud.google.com" target="blank">Google Cloud Platform console</a> and create a new project. If you don’t already have a Google Account, you can <a href="https://accounts.google.com/SignUp" target="blank">create one</a>.</p>

<p>First, you need to download GCE’s command line interface <code>gcloud</code>. The easiest way to install and initialize <code>gcloud</code> is via the <a href="https://cloud.google.com/sdk/docs/quickstarts" target="blank">Quickstarts</a>. You can stop after the Initialize SDK section and continue with the instructions in this post.</p>

<p>Once you are done initializing <code>gcloud</code>, you can then use it to install K8S command line interface <code>kubectl</code>:</p>

<pre><code class="language-sh">gcloud components install kubectl
</code></pre>

<p>We’ll be using <code>kubectl</code> to get information about our K8S cluster and set up a proxy to our K8S API.</p>

<p>Next thing we need to do is to spin up our one node K8S cluster:</p>

<pre><code class="language-sh">gcloud container --project &quot;my-project&quot; clusters create &quot;my-cluster&quot; --zone &quot;us-west1-a&quot; --machine-type &quot;g1-small&quot; --num-nodes &quot;1&quot;
</code></pre>

<p>Where:</p>

<ul>
<li><code>--project &quot;my-project&quot;</code> is the name of the project you created above.</li>
<li><code>&quot;my-cluster&quot;</code> is the name of your cluster</li>
<li><code>--zone &quot;us-west1-a&quot;</code> is your cluster’s zone, see Regions and Zones for more information.</li>
<li><code>--machine-type &quot;g1-small&quot;</code> is the machine type, see Machine Types for more information.</li>
<li><code>--num-nodes &quot;1&quot;</code> is the number of nodes to allocate for this cluster.</li>
</ul>

<p>Alternatively, you can add your cluster in the Google Container Engine console.</p>

<p>After a few minutes, our cluster should be up and running. To verify that it’s running, first set <code>gcloud</code> to point to your cluster zone:</p>

<pre><code class="language-sh">gcloud config set compute/zone us-west1-a
</code></pre>

<p>Then get a list of your running clusters:</p>

<pre><code class="language-sh">gcloud container clusters list
</code></pre>

<p>You should see <code>my-cluster</code> (or your own cluster name) on the list and it should have a status <code>RUNNING</code>.</p>

<p>Next, we need to get our cluster endpoint and credentials and update our <code>kubectl</code> config to point to our newly created cluster:</p>

<pre><code class="language-sh">gcloud container clusters get-credentials my-cluster
</code></pre>

<p>Now that kubectl is set to point to our new cluster, we should be able to use it to get information on our K8S cluster:</p>

<pre><code class="language-sh">kubectl config view
</code></pre>

<p>This will give us the IP address, username and password that we need to access the K8S admin UI at <code>https://&lt;ip address&gt;/ui</code></p>

<p>The next thing we want to do is use <code>kubectl</code> as a proxy to our K8S cluster’s API:</p>

<pre><code class="language-sh">kubectl proxy --port=8080 &amp;
</code></pre>

<p>Now you can interface with your K8S cluster’s API using your local endpoint at <a href="http://localhost:8080/api/v1">http://localhost:8080/api/v1</a>.</p>

                <p class="footnote">
                    <time datetime="2016-07-30T09:21:30-07:00" class="timeago">2016-07-30T09:21:30-07:00</time>
		            
                    
                    |
                    
                    
                    #<a href="http://www.rushtehrani.com.s3-website-us-west-2.amazonaws.com/tags/kubernetes">kubernetes</a> #<a href="http://www.rushtehrani.com.s3-website-us-west-2.amazonaws.com/tags/google-container-engine">google container engine</a> #<a href="http://www.rushtehrani.com.s3-website-us-west-2.amazonaws.com/tags/docker">docker</a> 
                    

                    

                    
                </p>
            </div>
        </div>
	</div>
    <div class="pure-u-1-24 pure-u-md-1-6"></div>
</div>

<div class="footer pure-g">
  <div class="pure-u-1-24 pure-u-md-5-24"></div>
  <div class="pure-u-11-12 pure-u-md-5-8">
    <div class="pure-menu pure-menu-horizontal footer-content">
      <a href="#" class="pure-menu-heading pull-right" id="gototop-btn">↑↑</a>
    </div>
  </div>
  <div class="pure-u-1-24 pure-u-md-1-6"></div>
</div>


<script src="http://www.rushtehrani.com.s3-website-us-west-2.amazonaws.com/js/jquery.min.js" type="text/javascript"></script>
<script src="http://www.rushtehrani.com.s3-website-us-west-2.amazonaws.com/js/jquery.timeago.js" type="text/javascript"></script>
<script type="text/javascript">
  $(function() {
    $("time.timeago").timeago();
  })
  $("#toggle-btn").click(function() {
    $("#toggle-content").toggle();
    if ($(this).html() === "☰") {
      $(this).html("X")
    } else {
      $(this).html("☰")
    }
  });
  $(window).resize(function() {
    if (window.innerWidth > 768) {
      $(".desktop").removeAttr("style");
    }
  });
</script>

<script>
  (function(i, s, o, g, r, a, m) {
    i['GoogleAnalyticsObject'] = r;
    i[r] = i[r] || function() {
      (i[r].q = i[r].q || []).push(arguments)
    }, i[r].l = 1 * new Date();
    a = s.createElement(o),
      m = s.getElementsByTagName(o)[0];
    a.async = 1;
    a.src = g;
    m.parentNode.insertBefore(a, m)
  })(window, document, 'script', '//www.google-analytics.com/analytics.js', 'ga');

  ga('create', 'UA-54533300-1', 'auto');
  ga('send', 'pageview');
</script>

</body>

</html>

